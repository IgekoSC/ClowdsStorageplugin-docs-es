

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Lista de Funciones &mdash; documentación de ClowdsStoragePlugin - alpha</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="documentación de ClowdsStoragePlugin - alpha" href="index.html"/>
        <link rel="next" title="Anexo 1. Clases recomendables" href="Anexo1.html"/>
        <link rel="prev" title="Advertencias" href="Advertencia.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> ClowdsStoragePlugin</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="acercaDe.html">Bienvenido a la documentación de Clowds</a><ul>
<li class="toctree-l2"><a class="reference internal" href="acercaDe.html#para-empezar-bien">Para empezar bien..</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Advertencia.html">Advertencias</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Advertencia.html#indicaciones-generales">Indicaciones Generales</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Lista de Funciones</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getchanges">getChanges()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloadfile-qstring-remotepath-qstring-localpath">downloadFile(QString remotePath, QString localPath)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#uploadfile-qstring-remotepath-qstring-localpath">uploadFile(QString remotePath, QString localPath)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Anexo1.html">Anexo 1. Clases recomendables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Anexo1.html#clase-jsondata">Clase JsonData</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo1.html#clase-file">Clase File</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo1.html#clase-myo2">Clase MyO2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo1.html#clase-change">Clase Change</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Anexo2.html">Anexo 2. Clase principal: campos y métodos útiles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Anexo2.html#qstring-accesstoken">QString accessToken</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo2.html#qstring-nextchanges">QString nextChanges</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo2.html#qhash-allevents">QHash  allEvents</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo2.html#qhash-mychanges">QHash &gt; myChanges</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo2.html#qhash-filesbyid">QHash filesById</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo2.html#qhash-filesbypath">QHash filesByPath</a></li>
<li class="toctree-l2"><a class="reference internal" href="Anexo2.html#qhash-qstring-qlist-clouds">QHash&lt;QString, QList&lt;CloudS</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ClowdsStoragePlugin</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Lista de Funciones</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/Lista-de-funciones.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="lista-de-funciones">
<h1>Lista de Funciones<a class="headerlink" href="#lista-de-funciones" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="getchanges">
<h2>getChanges()<a class="headerlink" href="#getchanges" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta es la función principal del Plug-in, la más importante, y
normalmente la que más código dedica. Su cometido es el de recibir
información de los sucesos de la nube, procesar esos eventos, y
traducirlos en cambios de Clowds (CloudStorageChange), para que el
programa sepa qué hacer con ellos. Devuelve un
<code class="docutils literal"><span class="pre">QHash&lt;QString,</span> <span class="pre">QList&lt;CloudStorageChange&gt;</span> <span class="pre">&gt;</span></code></p>
<p>el cual contendrá un registro de los cambios que se van a realizar. La
clave será la ruta del fichero en <code class="docutils literal"><span class="pre">Qstring</span></code>, y su valor un
<code class="docutils literal"><span class="pre">CloudStorageChange</span></code>, que es el cambio que ha sufrido.</p>
<p>El primer paso será hacer la petición HTTP para obtener la lista de los
eventos ocurridos en la nube e ir guardándolos en un QHash, por ejemplo
allEvents (ver <a class="reference external" href="Anexo2">ANEXO 2</a>). Lo importante es que el QHash almacene los
metadatos (normalmente en JSON).</p>
<p>En el caso de que la nube pueda devolver más de un cambio por archivo,
una buena manera de tratar esta lista de cambios sería hacer otro QHash,
como myChanges (Ver ANEXO 2), en el que en cada valor almacene un QMap.
Este QMap sería una lista de los eventos (metadatos), indexada por
fecha.</p>
<p><code class="docutils literal"><span class="pre">QHash</span> <span class="pre">&lt;</span> <span class="pre">file_ID,</span> <span class="pre">QMap&lt;fecha,</span> <span class="pre">evento&gt;</span> <span class="pre">&gt;</span></code></p>
<p>Con esto se conseguirá que por cada fichero haya una lista de todos sus
cambios ordenados cronológicamente.</p>
<p>La mecánica será recorrer todos esos cambios ordenados por fecha para ir
procesando por cada fichero sus cambios uno a uno, del más antiguo al
más reciente. Según los metadatos de cada evento, debemos ir asignando
las ‘Flags’ en función de qué clase de evento se trate: subir o crear es
‘New’, renombrar o mover es ‘Moved’, etc.</p>
</div>
<div class="section" id="downloadfile-qstring-remotepath-qstring-localpath">
<h2>downloadFile(QString remotePath, QString localPath)<a class="headerlink" href="#downloadfile-qstring-remotepath-qstring-localpath" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta función descarga desde la nube cada archivo que Clowds considere
que debe descargar al sincronizar.</p>
<p>Aquí sólo debes preocuparte de introducir la petición HTTP que requiera
el sistema que estemos implementando para hacer la descarga de un sólo
archivo.</p>
<p>Hay que tener en cuenta que cada vez que Clowds ejecute la función,
pasará por parámetro las variables remotePath y localPath. Generalmente
son iguales, salvo que el sistema con el que estemos trabajando cifre
los directorios. En ese caso, remotePath estará cifrada. El único
momento en el que se ha de utilizar localPath, es cuando le indicamos la
ruta de descarga. Para descargar el archivo: resources_-&gt;shrGet(QUrl,
QFile); QUrl - URL de la petición. QFile - El archivo que se descargará
en la carpeta de sincronización. Dependiendo del sistema con el que
estemos trabajando, es posible que se requieran cabeceras, o parámetros
en la URL.</p>
</div>
<div class="section" id="uploadfile-qstring-remotepath-qstring-localpath">
<h2>uploadFile(QString remotePath, QString localPath)<a class="headerlink" href="#uploadfile-qstring-remotepath-qstring-localpath" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta función se encarga de subir los archivos que Clowds detecte como
‘new’ en la carpeta de sincronización. Al sincronizar Clowds, se
encargará de subir a la nube los archivos creados en local.</p>
<p>Recordemos que cada vez que Clowds ejecute la función, pasará por
parámetro las variables remotePath y localPath. Generalmente son
iguales, salvo que el sistema con el que estemos</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Anexo1.html" class="btn btn-neutral float-right" title="Anexo 1. Clases recomendables">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Advertencia.html" class="btn btn-neutral" title="Advertencias"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Igeko.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>